var l=class{withFields(t){let r=Object.keys(this).map(n=>n in t?t[n]:this[n]);return new this.constructor(...r)}},A=class{static fromArray(t,r){let n=r||new Ge;for(let i=t.length-1;i>=0;--i)n=new ke(t[i],n);return n}[Symbol.iterator](){return new It(this)}toArray(){return[...this]}atLeastLength(t){for(let r of this){if(t<=0)return!0;t--}return t<=0}hasLength(t){for(let r of this){if(t<=0)return!1;t--}return t===0}countLength(){let t=0;for(let r of this)t++;return t}};function _(e,t){return new ke(e,t)}function f(e,t){return A.fromArray(e,t)}var It=class{#e;constructor(t){this.#e=t}next(){if(this.#e instanceof Ge)return{done:!0};{let{head:t,tail:r}=this.#e;return this.#e=r,{value:t,done:!1}}}},Ge=class extends A{},ke=class extends A{constructor(t,r){super(),this.head=t,this.tail=r}},He=class e{constructor(t){if(!(t instanceof Uint8Array))throw"BitArray can only be constructed from a Uint8Array";this.buffer=t}get length(){return this.buffer.length}byteAt(t){return this.buffer[t]}floatAt(t){return Vn(this.buffer.slice(t,t+8))}intFromSlice(t,r){return Kn(this.buffer.slice(t,r))}binaryFromSlice(t,r){return new e(this.buffer.slice(t,r))}sliceAfter(t){return new e(this.buffer.slice(t))}};function Kn(e){e=e.reverse();let t=0;for(let r=e.length-1;r>=0;r--)t=t*256+e[r];return t}function Vn(e){return new Float64Array(e.reverse().buffer)[0]}var ne=class e extends l{static isResult(t){return t instanceof e}},p=class extends ne{constructor(t){super(),this[0]=t}isOk(){return!0}},d=class extends ne{constructor(t){super(),this[0]=t}isOk(){return!1}};function w(e,t){let r=[e,t];for(;r.length;){let n=r.pop(),i=r.pop();if(n===i)continue;if(!jr(n)||!jr(i)||!si(n,i)||Qn(n,i)||ei(n,i)||ti(n,i)||ri(n,i)||ni(n,i)||ii(n,i))return!1;let o=Object.getPrototypeOf(n);if(o!==null&&typeof o.equals=="function")try{if(n.equals(i))continue;return!1}catch{}let[u,a]=Zn(n);for(let c of u(n))r.push(a(n,c),a(i,c))}return!0}function Zn(e){if(e instanceof Map)return[t=>t.keys(),(t,r)=>t.get(r)];{let t=e instanceof globalThis.Error?["message"]:[];return[r=>[...t,...Object.keys(r)],(r,n)=>r[n]]}}function Qn(e,t){return e instanceof Date&&(e>t||e<t)}function ei(e,t){return e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((r,n)=>r===t[n]))}function ti(e,t){return Array.isArray(e)&&e.length!==t.length}function ri(e,t){return e instanceof Map&&e.size!==t.size}function ni(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(r=>!t.has(r)))}function ii(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function jr(e){return typeof e=="object"&&e!==null}function si(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(n=>e instanceof n)?!1:e.constructor===t.constructor}function Oe(e,t,r,n,i,s){let o=new globalThis.Error(i);o.gleam_error=e,o.module=t,o.line=r,o.fn=n;for(let u in s)o[u]=s[u];return o}var h=class extends l{constructor(t){super(),this[0]=t}},m=class extends l{};function Y(e,t){if(e instanceof h){let r=e[0];return new p(r)}else return new d(t)}function Je(e){if(e.isOk()){let t=e[0];return new h(t)}else return new m}function ie(e,t){return e instanceof h?e[0]:t}function Ft(e,t){if(e instanceof h){let r=e[0];return new h(t(r))}else return new m}var Ye=class extends l{constructor(t,r){super(),this.content=t,this.submatches=r}},Xe=class extends l{constructor(t,r){super(),this.error=t,this.byte_index=r}},Ke=class extends l{constructor(t,r){super(),this.case_insensitive=t,this.multi_line=r}};function Ar(e,t){return Tr(e,t)}function Er(e,t){return zr(e,t)}var Cr=new WeakMap,Bt=new DataView(new ArrayBuffer(8)),Mt=0;function Pt(e){let t=Cr.get(e);if(t!==void 0)return t;let r=Mt++;return Mt===2147483647&&(Mt=0),Cr.set(e,r),r}function Dt(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}function Wt(e){let t=0,r=e.length;for(let n=0;n<r;n++)t=Math.imul(31,t)+e.charCodeAt(n)|0;return t}function Sr(e){Bt.setFloat64(0,e);let t=Bt.getInt32(0),r=Bt.getInt32(4);return Math.imul(73244475,t>>16^t)^r}function oi(e){return Wt(e.toString())}function ui(e){let t=Object.getPrototypeOf(e);if(t!==null&&typeof t.hashCode=="function")try{let n=e.hashCode(e);if(typeof n=="number")return n}catch{}if(e instanceof Promise||e instanceof WeakSet||e instanceof WeakMap)return Pt(e);if(e instanceof Date)return Sr(e.getTime());let r=0;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||e instanceof Uint8Array)for(let n=0;n<e.length;n++)r=Math.imul(31,r)+T(e[n])|0;else if(e instanceof Set)e.forEach(n=>{r=r+T(n)|0});else if(e instanceof Map)e.forEach((n,i)=>{r=r+Dt(T(n),T(i))|0});else{let n=Object.keys(e);for(let i=0;i<n.length;i++){let s=n[i],o=e[s];r=r+Dt(T(o),Wt(s))|0}}return r}function T(e){if(e===null)return 1108378658;if(e===void 0)return 1108378659;if(e===!0)return 1108378657;if(e===!1)return 1108378656;switch(typeof e){case"number":return Sr(e);case"string":return Wt(e);case"bigint":return oi(e);case"object":return ui(e);case"symbol":return Pt(e);case"function":return Pt(e);default:return 0}}var M=5,Rt=Math.pow(2,M),li=Rt-1,ai=Rt/2,fi=Rt/4,j=0,B=1,E=2,X=3,Gt={type:E,bitmap:0,array:[]};function Le(e,t){return e>>>t&li}function Ze(e,t){return 1<<Le(e,t)}function ci(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function Ht(e,t){return ci(e&t-1)}function z(e,t,r){let n=e.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=e[s];return i[t]=r,i}function pi(e,t,r){let n=e.length,i=new Array(n+1),s=0,o=0;for(;s<t;)i[o++]=e[s++];for(i[o++]=r;s<n;)i[o++]=e[s++];return i}function Ut(e,t){let r=e.length,n=new Array(r-1),i=0,s=0;for(;i<t;)n[s++]=e[i++];for(++i;i<r;)n[s++]=e[i++];return n}function Nr(e,t,r,n,i,s){let o=T(t);if(o===n)return{type:X,hash:o,array:[{type:j,k:t,v:r},{type:j,k:i,v:s}]};let u={val:!1};return ve(Jt(Gt,e,o,t,r,u),e,n,i,s,u)}function ve(e,t,r,n,i,s){switch(e.type){case B:return di(e,t,r,n,i,s);case E:return Jt(e,t,r,n,i,s);case X:return mi(e,t,r,n,i,s)}}function di(e,t,r,n,i,s){let o=Le(r,t),u=e.array[o];if(u===void 0)return s.val=!0,{type:B,size:e.size+1,array:z(e.array,o,{type:j,k:n,v:i})};if(u.type===j)return w(n,u.k)?i===u.v?e:{type:B,size:e.size,array:z(e.array,o,{type:j,k:n,v:i})}:(s.val=!0,{type:B,size:e.size,array:z(e.array,o,Nr(t+M,u.k,u.v,r,n,i))});let a=ve(u,t+M,r,n,i,s);return a===u?e:{type:B,size:e.size,array:z(e.array,o,a)}}function Jt(e,t,r,n,i,s){let o=Ze(r,t),u=Ht(e.bitmap,o);if(e.bitmap&o){let a=e.array[u];if(a.type!==j){let $=ve(a,t+M,r,n,i,s);return $===a?e:{type:E,bitmap:e.bitmap,array:z(e.array,u,$)}}let c=a.k;return w(n,c)?i===a.v?e:{type:E,bitmap:e.bitmap,array:z(e.array,u,{type:j,k:n,v:i})}:(s.val=!0,{type:E,bitmap:e.bitmap,array:z(e.array,u,Nr(t+M,c,a.v,r,n,i))})}else{let a=e.array.length;if(a>=ai){let c=new Array(32),$=Le(r,t);c[$]=Jt(Gt,t+M,r,n,i,s);let b=0,y=e.bitmap;for(let v=0;v<32;v++){if(y&1){let J=e.array[b++];c[v]=J}y=y>>>1}return{type:B,size:a+1,array:c}}else{let c=pi(e.array,u,{type:j,k:n,v:i});return s.val=!0,{type:E,bitmap:e.bitmap|o,array:c}}}}function mi(e,t,r,n,i,s){if(r===e.hash){let o=Yt(e,n);if(o!==-1)return e.array[o].v===i?e:{type:X,hash:r,array:z(e.array,o,{type:j,k:n,v:i})};let u=e.array.length;return s.val=!0,{type:X,hash:r,array:z(e.array,u,{type:j,k:n,v:i})}}return ve({type:E,bitmap:Ze(e.hash,t),array:[e]},t,r,n,i,s)}function Yt(e,t){let r=e.array.length;for(let n=0;n<r;n++)if(w(t,e.array[n].k))return n;return-1}function Ve(e,t,r,n){switch(e.type){case B:return _i(e,t,r,n);case E:return hi(e,t,r,n);case X:return $i(e,n)}}function _i(e,t,r,n){let i=Le(r,t),s=e.array[i];if(s!==void 0){if(s.type!==j)return Ve(s,t+M,r,n);if(w(n,s.k))return s}}function hi(e,t,r,n){let i=Ze(r,t);if(!(e.bitmap&i))return;let s=Ht(e.bitmap,i),o=e.array[s];if(o.type!==j)return Ve(o,t+M,r,n);if(w(n,o.k))return o}function $i(e,t){let r=Yt(e,t);if(!(r<0))return e.array[r]}function Xt(e,t,r,n){switch(e.type){case B:return xi(e,t,r,n);case E:return wi(e,t,r,n);case X:return gi(e,n)}}function xi(e,t,r,n){let i=Le(r,t),s=e.array[i];if(s===void 0)return e;let o;if(s.type===j){if(!w(s.k,n))return e}else if(o=Xt(s,t+M,r,n),o===s)return e;if(o===void 0){if(e.size<=fi){let u=e.array,a=new Array(e.size-1),c=0,$=0,b=0;for(;c<i;){let y=u[c];y!==void 0&&(a[$]=y,b|=1<<c,++$),++c}for(++c;c<u.length;){let y=u[c];y!==void 0&&(a[$]=y,b|=1<<c,++$),++c}return{type:E,bitmap:b,array:a}}return{type:B,size:e.size-1,array:z(e.array,i,o)}}return{type:B,size:e.size,array:z(e.array,i,o)}}function wi(e,t,r,n){let i=Ze(r,t);if(!(e.bitmap&i))return e;let s=Ht(e.bitmap,i),o=e.array[s];if(o.type!==j){let u=Xt(o,t+M,r,n);return u===o?e:u!==void 0?{type:E,bitmap:e.bitmap,array:z(e.array,s,u)}:e.bitmap===i?void 0:{type:E,bitmap:e.bitmap^i,array:Ut(e.array,s)}}return w(n,o.k)?e.bitmap===i?void 0:{type:E,bitmap:e.bitmap^i,array:Ut(e.array,s)}:e}function gi(e,t){let r=Yt(e,t);if(r<0)return e;if(e.array.length!==1)return{type:X,hash:e.hash,array:Ut(e.array,r)}}function Ir(e,t){if(e===void 0)return;let r=e.array,n=r.length;for(let i=0;i<n;i++){let s=r[i];if(s!==void 0){if(s.type===j){t(s.v,s.k);continue}Ir(s,t)}}}var oe=class e{static fromObject(t){let r=Object.keys(t),n=e.new();for(let i=0;i<r.length;i++){let s=r[i];n=n.set(s,t[s])}return n}static fromMap(t){let r=e.new();return t.forEach((n,i)=>{r=r.set(i,n)}),r}static new(){return new e(void 0,0)}constructor(t,r){this.root=t,this.size=r}get(t,r){if(this.root===void 0)return r;let n=Ve(this.root,0,T(t),t);return n===void 0?r:n.v}set(t,r){let n={val:!1},i=this.root===void 0?Gt:this.root,s=ve(i,0,T(t),t,r,n);return s===this.root?this:new e(s,n.val?this.size+1:this.size)}delete(t){if(this.root===void 0)return this;let r=Xt(this.root,0,T(t),t);return r===this.root?this:r===void 0?e.new():new e(r,this.size-1)}has(t){return this.root===void 0?!1:Ve(this.root,0,T(t),t)!==void 0}entries(){if(this.root===void 0)return[];let t=[];return this.forEach((r,n)=>t.push([n,r])),t}forEach(t){Ir(this.root,t)}hashCode(){let t=0;return this.forEach((r,n)=>{t=t+Dt(T(r),T(n))|0}),t}equals(t){if(!(t instanceof e)||this.size!==t.size)return!1;let r=!0;return this.forEach((n,i)=>{r=r&&w(t.get(i,!n),n)}),r}};var Kt=void 0,Fr={};function Pr(e){return/^[-+]?(\d+)$/.test(e)?new p(parseInt(e)):new d(Kt)}function Dr(e){return e.toString()}function yi(e){if(Intl&&Intl.Segmenter)return new Intl.Segmenter().segment(e)[Symbol.iterator]()}function Ur(e){let t,r=yi(e);return r?t=r.next().value?.segment:t=e.match(/./su)?.[0],t?new p([t,e.slice(t.length)]):new d(Kt)}function Vt(e){return e.toLowerCase()}function Zt(e){let t="";for(let r of e)t=t+r;return t}function Wr(e,t){return e.startsWith(t)}function Rr(e){console.log(e)}function Tr(e,t){try{let r="gu";return t.case_insensitive&&(r+="i"),t.multi_line&&(r+="m"),new p(new RegExp(e,r))}catch(r){let n=(r.columnNumber||0)|0;return new d(new Xe(r.message,n))}}function zr(e,t){let r=Array.from(t.matchAll(e)).map(n=>{let i=n[0],s=[];for(let o=n.length-1;o>0;o--){if(n[o]){s[o-1]=new h(n[o]);continue}s.length>0&&(s[o-1]=new m)}return new Ye(i,A.fromArray(s))});return A.fromArray(r)}function Gr(e,t){let r=e.get(t,Fr);return r===Fr?new d(Kt):new p(r)}function Qt(e){if(typeof e=="string")return"String";if(typeof e=="boolean")return"Bool";if(e instanceof ne)return"Result";if(e instanceof A)return"List";if(e instanceof He)return"BitArray";if(e instanceof oe)return"Dict";if(Number.isInteger(e))return"Int";if(Array.isArray(e))return`Tuple of ${e.length} elements`;if(typeof e=="number")return"Float";if(e===null)return"Null";if(e===void 0)return"Nil";{let t=typeof e;return t.charAt(0).toUpperCase()+t.slice(1)}}function er(e,t){return bi(e,Qt(t))}function bi(e,t){return new d(A.fromArray([new K(e,t,A.fromArray([]))]))}function Hr(e){return typeof e=="string"?new p(e):er("String",e)}function Jr(e){return Number.isInteger(e)?new p(e):er("Int",e)}function Yr(e,t){let r=()=>er("Dict",e);if(e instanceof oe||e instanceof WeakMap||e instanceof Map){let n=Gr(e,t);return new p(n.isOk()?new h(n[0]):new m)}else return e===null?r():Object.getPrototypeOf(e)==Object.prototype?Br(e,t,()=>new p(new m)):Br(e,t,r)}function Br(e,t,r){try{return t in e?new p(new h(e[t])):r()}catch{return r()}}function rr(e){return Pr(e)}function N(e){return Dr(e)}function Zr(e){return e[1]}function Li(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=_(i,n)}}}function G(e){return Li(e,f([]))}function rn(e){if(e.hasLength(0))return new d(void 0);{let t=e.head;return new p(t)}}function vi(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return G(s);{let o=n.head;e=n.tail,t=i,r=_(i(o),s)}}}function I(e,t){return vi(e,t,f([]))}function ji(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=_(i,n)}}}function ce(e,t){return ji(G(e),t)}function Ai(e,t,r){for(;;){let n=e,i=t,s=r;if(i<=0)return s;e=n,t=i-1,r=_(n,s)}}function nn(e,t){return Ai(e,t,f([]))}function U(e,t){if(e.isOk()){let r=e[0];return new p(t(r))}else{let r=e[0];return new d(r)}}function Ee(e,t){if(e.isOk()){let r=e[0];return new p(r)}else{let r=e[0];return new d(t(r))}}function W(e,t){if(e.isOk()){let r=e[0];return t(r)}else{let r=e[0];return new d(r)}}function C(e,t){return W(e,t)}function sn(e,t){return e.isOk()?e[0]:t}function on(e){return Ee(e,t=>{})}function pe(e){return Zt(e)}function V(e){return e}var K=class extends l{constructor(t,r,n){super(),this.expected=t,this.found=r,this.path=n}};function Z(e){return e}function tt(e){return Hr(e)}function rt(e){return Qt(e)}function Ci(e){return Jr(e)}function ln(e){return t=>{if(e.hasLength(0))return new d(f([new K("another type",rt(t),f([]))]));{let r=e.head,n=e.tail,i=r(t);if(i.isOk()){let s=i[0];return new p(s)}else return ln(n)(t)}}}function Si(e,t){let r=Z(t),n=ln(f([tt,s=>U(Ci(s),N)])),i=(()=>{let s=n(r);if(s.isOk())return s[0];{let o=f(["<",rt(r),">"]),u=pe(o);return V(u)}})();return e.withFields({path:_(i,e.path)})}function Ni(e,t){return Ee(e,r=>I(r,t))}function sr(e,t){return r=>{let n=new K("field","nothing",f([]));return W(Yr(r,e),i=>{let o=Y(i,f([n])),u=W(o,t);return Ni(u,a=>Si(a,e))})}}function me(e){return Vt(e)}function an(e,t){return Wr(e,t)}function fn(e){let r=pe(e);return V(r)}function ee(e){return Ur(e)}function ur(e){return Rr(e)}function nt(e,t,r){return e?t:r()}function mn(e){try{let t=JSON.parse(e);return new p(t)}catch(t){return new d(Wi(t,e))}}function Wi(e,t){return Ri(e)?new st:Gi(e,t)}function Ri(e){return/((unexpected (end|eof))|(end of data)|(unterminated string)|(json( parse error|\.parse)\: expected '(\:|\}|\])'))/i.test(e.message)}function Gi(e,t){let r=[Hi,Ji,Xi,Yi];for(let n of r){let i=n(e,t);if(i)return i}return new H("",0)}function Hi(e){let r=/unexpected token '(.)', ".+" is not valid JSON/i.exec(e.message);if(!r)return null;let n=it(r[1]);return new H(n,-1)}function Ji(e){let r=/unexpected token (.) in JSON at position (\d+)/i.exec(e.message);if(!r)return null;let n=it(r[1]),i=Number(r[2]);return new H(n,i)}function Yi(e,t){let n=/(unexpected character|expected .*) at line (\d+) column (\d+)/i.exec(e.message);if(!n)return null;let i=Number(n[2]),s=Number(n[3]),o=Ki(i,s,t),u=it(t[o]);return new H(u,o)}function Xi(e){let r=/unexpected (identifier|token) "(.)"/i.exec(e.message);if(!r)return null;let n=it(r[2]);return new H(n,0)}function it(e){return"0x"+e.charCodeAt(0).toString(16).toUpperCase()}function Ki(e,t,r){if(e===1)return t-1;let n=1,i=0;return r.split("").find((s,o)=>(s===`
`&&(n+=1),n===e?(i=o+t,!0):!1)),i}var st=class extends l{},H=class extends l{constructor(t,r){super(),this.byte=t,this.position=r}};var ar=class extends l{constructor(t){super(),this[0]=t}};function Qi(e,t){return C(mn(e),r=>{let n=t(r);return Ee(n,i=>new ar(i))})}function _n(e,t){return Qi(e,t)}var ot=class extends l{constructor(t){super(),this.all=t}};function hn(e){return new ot(f([(t,r)=>e(t)]))}function te(){return new ot(f([]))}var qe=class extends l{constructor(t){super(),this.content=t}},k=class extends l{constructor(t,r,n,i,s,o,u){super(),this.key=t,this.namespace=r,this.tag=n,this.attrs=i,this.children=s,this.self_closing=o,this.void=u}};var _e=class extends l{constructor(t,r,n){super(),this[0]=t,this[1]=r,this.as_property=n}},Te=class extends l{constructor(t,r){super(),this[0]=t,this[1]=r}};function xn(e,t){return new _e(e,Z(t),!1)}function wn(e,t){return new _e(e,Z(t),!0)}function gn(e,t){return new Te("on"+e,t)}function ze(e){return xn("class",e)}function yn(e){return xn("src",e)}function bn(e){return wn("height",e)}function kn(e){return wn("width",e)}function Ce(e,t,r){return e==="area"?new k("","",e,t,f([]),!1,!0):e==="base"?new k("","",e,t,f([]),!1,!0):e==="br"?new k("","",e,t,f([]),!1,!0):e==="col"?new k("","",e,t,f([]),!1,!0):e==="embed"?new k("","",e,t,f([]),!1,!0):e==="hr"?new k("","",e,t,f([]),!1,!0):e==="img"?new k("","",e,t,f([]),!1,!0):e==="input"?new k("","",e,t,f([]),!1,!0):e==="link"?new k("","",e,t,f([]),!1,!0):e==="meta"?new k("","",e,t,f([]),!1,!0):e==="param"?new k("","",e,t,f([]),!1,!0):e==="source"?new k("","",e,t,f([]),!1,!0):e==="track"?new k("","",e,t,f([]),!1,!0):e==="wbr"?new k("","",e,t,f([]),!1,!0):new k("","",e,t,r,!1,!1)}function he(e){return new qe(e)}var at=class extends l{constructor(t){super(),this[0]=t}},D=class extends l{constructor(t){super(),this[0]=t}};var re=class extends l{};var ft=class extends l{constructor(t){super(),this[0]=t}};function mr(e,t,r,n=!1){let i,s=[{prev:e,next:t,parent:e.parentNode}];for(;s.length;){let{prev:o,next:u,parent:a}=s.pop();if(u.subtree!==void 0&&(u=u.subtree()),u.content!==void 0)if(o)if(o.nodeType===Node.TEXT_NODE)o.textContent!==u.content&&(o.textContent=u.content),i??=o;else{let c=document.createTextNode(u.content);a.replaceChild(c,o),i??=c}else{let c=document.createTextNode(u.content);a.appendChild(c),i??=c}else if(u.tag!==void 0){let c=_s({prev:o,next:u,dispatch:r,stack:s,isComponent:n});o?o!==c&&a.replaceChild(c,o):a.appendChild(c),i??=c}else u.elements!==void 0?ct(u,c=>{s.unshift({prev:o,next:c,parent:a}),o=o?.nextSibling}):u.subtree!==void 0&&s.push({prev:o,next:u,parent:a})}return i}function _s({prev:e,next:t,dispatch:r,stack:n}){let i=t.namespace||"http://www.w3.org/1999/xhtml",s=e&&e.nodeType===Node.ELEMENT_NODE&&e.localName===t.tag&&e.namespaceURI===(t.namespace||"http://www.w3.org/1999/xhtml"),o=s?e:i?document.createElementNS(i,t.tag):document.createElement(t.tag),u;if(Se.has(o))u=Se.get(o);else{let g=new Map;Se.set(o,g),u=g}let a=s?new Set(u.keys()):null,c=s?new Set(Array.from(e.attributes,g=>g.name)):null,$=null,b=null,y=null;for(let g of t.attrs){let x=g[0],L=g[1];if(g.as_property)o[x]!==L&&(o[x]=L),s&&c.delete(x);else if(x.startsWith("on")){let q=x.slice(2),be=r(L);u.has(q)||o.addEventListener(q,Ne),u.set(q,be),s&&a.delete(q)}else if(x.startsWith("data-lustre-on-")){let q=x.slice(15),be=r(hs);u.has(q)||o.addEventListener(q,Ne),u.set(q,be),o.setAttribute(x,L)}else x==="class"?$=$===null?L:$+" "+L:x==="style"?b=b===null?L:b+L:x==="dangerous-unescaped-html"?y=L:(typeof L=="string"&&o.setAttribute(x,L),(x==="value"||x==="selected")&&(o[x]=L),s&&c.delete(x))}if($!==null&&(o.setAttribute("class",$),s&&c.delete("class")),b!==null&&(o.setAttribute("style",b),s&&c.delete("style")),s){for(let g of c)o.removeAttribute(g);for(let g of a)u.delete(g),o.removeEventListener(g,Ne)}if(t.key!==void 0&&t.key!=="")o.setAttribute("data-lustre-key",t.key);else if(y!==null)return o.innerHTML=y,o;let v=o.firstChild,J=null,We=null,Re=null,ye=t.children[Symbol.iterator]().next().value;s&&ye!==void 0&&ye.key!==void 0&&ye.key!==""&&(J=new Set,We=Ln(e),Re=Ln(t));for(let g of t.children)ct(g,x=>{x.key!==void 0&&J!==null?v=$s(v,x,o,n,Re,We,J):(n.unshift({prev:v,next:x,parent:o}),v=v?.nextSibling)});for(;v;){let g=v.nextSibling;o.removeChild(v),v=g}return o}var Se=new WeakMap;function Ne(e){let t=e.currentTarget;if(!Se.has(t)){t.removeEventListener(e.type,Ne);return}let r=Se.get(t);if(!r.has(e.type)){t.removeEventListener(e.type,Ne);return}r.get(e.type)(e)}function hs(e){let t=e.target,r=t.getAttribute(`data-lustre-on-${e.type}`),n=JSON.parse(t.getAttribute("data-lustre-data")||"{}"),i=JSON.parse(t.getAttribute("data-lustre-include")||"[]");switch(e.type){case"input":case"change":i.push("target.value");break}return{tag:r,data:i.reduce((s,o)=>{let u=o.split(".");for(let a=0,c=s,$=e;a<u.length;a++)a===u.length-1?c[u[a]]=$[u[a]]:(c[u[a]]??={},$=$[u[a]],c=c[u[a]]);return s},{data:n})}}function Ln(e){let t=new Map;if(e)for(let r of e.children)ct(r,n=>{let i=n?.key||n?.getAttribute?.("data-lustre-key");i&&t.set(i,n)});return t}function $s(e,t,r,n,i,s,o){for(;e&&!i.has(e.getAttribute("data-lustre-key"));){let a=e.nextSibling;r.removeChild(e),e=a}if(s.size===0)return ct(t,a=>{n.unshift({prev:e,next:a,parent:r}),e=e?.nextSibling}),e;if(o.has(t.key))return console.warn(`Duplicate key found in Lustre vnode: ${t.key}`),n.unshift({prev:null,next:t,parent:r}),e;o.add(t.key);let u=s.get(t.key);if(!u&&!e)return n.unshift({prev:null,next:t,parent:r}),e;if(!u&&e!==null){let a=document.createTextNode("");return r.insertBefore(a,e),n.unshift({prev:a,next:t,parent:r}),e}return!u||u===e?(n.unshift({prev:e,next:t,parent:r}),e=e?.nextSibling,e):(r.insertBefore(u,e),n.unshift({prev:u,next:t,parent:r}),e)}function ct(e,t){if(e.elements!==void 0)for(let r of e.elements)t(r);else t(e)}var pt=class e{#e=null;#r=[];#t=[];#i=!1;#o=!1;#n=null;#u=null;#s=null;static start(t,r,n,i,s){if(!dt())return new d(new $e);let o=r instanceof HTMLElement?r:document.querySelector(r);if(!o)return new d(new mt(r));let u=new e(n(t),i,s,o);return new p(a=>u.send(a))}constructor([t,r],n,i,s=document.body,o=!1){this.#n=t,this.#u=n,this.#s=i,this.#e=s,this.#t=r.all.toArray(),this.#i=!0,this.#o=o,window.requestAnimationFrame(()=>this.#l())}send(t){switch(!0){case t instanceof D:{this.#r.push(t[0]),this.#l();return}case t instanceof re:{this.#c();return}case t instanceof at:{this.#f(t[0]);return}default:return}}emit(t,r){this.#e.dispatchEvent(new CustomEvent(t,{bubbles:!0,detail:r,composed:!0}))}#l(){this.#a();let t=this.#s(this.#n),r=n=>i=>{let s=n(i);s instanceof p&&this.send(new D(s[0]))};this.#i=!1,this.#e=mr(this.#e,t,r,this.#o)}#a(t=0){for(;this.#r.length;){let[r,n]=this.#u(this.#n,this.#r.shift());this.#i||=!w(this.#n,r),this.#n=r,this.#t=this.#t.concat(n.all.toArray())}for(;this.#t.length;)this.#t.shift()(r=>this.send(new D(r)),(r,n)=>this.emit(r,n));this.#r.length&&(t<5?this.#a(++t):window.requestAnimationFrame(()=>this.#l()))}#f(t){switch(!0){case t instanceof ft:{let r=this.#s(t[0]),n=i=>s=>{let o=i(s);o instanceof p&&this.send(new D(o[0]))};this.#r=[],this.#t=[],this.#i=!1,this.#e=mr(this.#e,r,n,this.#o)}}}#c(){this.#e.remove(),this.#e=null,this.#n=null,this.#r=[],this.#t=[],this.#i=!1,this.#u=()=>{},this.#s=()=>{}}},vn=(e,t,r)=>pt.start(r,t,e.init,e.update,e.view),dt=()=>window&&window.document;var _r=class extends l{constructor(t,r,n,i){super(),this.init=t,this.update=r,this.view=n,this.on_attribute_change=i}};var mt=class extends l{constructor(t){super(),this.selector=t}},$e=class extends l{};function jn(e,t,r){return new _r(e,t,r,new m)}function An(e,t,r){return nt(!dt(),new d(new $e),()=>vn(e,t,r))}function Ie(e,t){return Ce("div",e,t)}function En(e){return Ce("img",e,f([]))}function _t(e,t){return Ce("button",e,t)}function gs(e,t){return gn(e,t)}function ht(e){return gs("click",t=>new p(e))}var Fe=class extends l{constructor(t,r,n,i,s,o,u){super(),this.scheme=t,this.userinfo=r,this.host=n,this.port=i,this.path=s,this.query=o,this.fragment=u}};function qn(e,t){let n=Ar(e,new Ke(!0,!1)),i=on(n),s=U(i,a=>Er(a,t)),o=W(s,rn),u=U(o,a=>a.submatches);return sn(u,f([]))}function ks(e){if(e instanceof m)return new m;{let t=e[0],r=ee(t);if(r.isOk()&&r[0][0]==="?"){let n=r[0][1];return new h(n)}else return new m}}function $t(e){return e instanceof h&&e[0]===""?new m:e instanceof m?new m:e}function Os(e,t){for(;;){let r=e,n=t;if(n===0)return 0;if(r.hasLength(0))return n;e=r.tail,t=n-1}}function Tn(e,t){return ce(e,nn(new m,Os(e,t)))}function Ls(e){let t=ie(e,"");if(t==="")return[new m,new m,new m];if(t==="//")return[new m,new h(""),new m];{let r=t,n=(()=>{let s=qn("^(//)?((.*)@)?(\\[[a-zA-Z0-9:.]*\\]|[^:]*)(:(\\d*))?",r);return Tn(s,6)})();if(n.hasLength(6)){let i=n.tail.tail.head,s=n.tail.tail.tail.head,o=n.tail.tail.tail.tail.tail.head,u=$t(i),a=$t(s),c=(()=>{let b=ie(o,""),y=rr(b);return Je(y)})();return[u,a,c]}else return[new m,new m,new m]}}function vs(e){let t="^(([a-z][a-z0-9\\+\\-\\.]*):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#.*)?",r=(()=>{let x=qn(t,e);return Tn(x,8)})(),n=(()=>{if(r.hasLength(8)){let g=r.tail.head,x=r.tail.tail.head,L=r.tail.tail.tail.tail.head,q=r.tail.tail.tail.tail.tail.head,be=r.tail.tail.tail.tail.tail.tail.tail.head;return[g,x,L,q,be]}else return[new m,new m,new m,new m,new m]})(),i=n[0],s=n[1],o=n[2],u=n[3],a=n[4],c=$t(i),$=ie(o,""),b=ks(u),y=Ls(s),v=y[0],J=y[1],We=y[2],Re=(()=>{let x=Y(a,void 0),L=W(x,ee),q=U(L,Zr);return Je(q)})(),ye=(()=>{let x=$t(c);return Ft(x,me)})();return new p(new Fe(ye,v,J,We,$,b,Re))}function zn(e){return vs(e)}function Cn(e){let t=(()=>{let u=e.fragment;if(u instanceof h){let a=u[0];return f(["#",a])}else return f([])})(),r=(()=>{let u=e.query;if(u instanceof h){let a=u[0];return _("?",_(a,t))}else return t})(),n=_(e.path,r),i=(()=>{let u=e.host,a=an(e.path,"/");if(u instanceof h&&!a&&u[0]!==""){let c=u[0];return _("/",n)}else return n})(),s=(()=>{let u=e.host,a=e.port;if(u instanceof h&&a instanceof h){let c=a[0];return _(":",_(N(c),i))}else return i})(),o=(()=>{let u=e.scheme,a=e.userinfo,c=e.host;if(u instanceof h&&a instanceof h&&c instanceof h){let $=u[0],b=a[0],y=c[0];return _($,_("://",_(b,_("@",_(y,s)))))}else if(u instanceof h&&a instanceof m&&c instanceof h){let $=u[0],b=c[0];return _($,_("://",_(b,s)))}else if(u instanceof h&&a instanceof h&&c instanceof m){let $=u[0];return _($,_(":",s))}else if(u instanceof h&&a instanceof m&&c instanceof m){let $=u[0];return _($,_(":",s))}else if(u instanceof m&&a instanceof m&&c instanceof h){let $=c[0];return _("//",_($,s))}else return s})();return fn(o)}var xe=class extends l{},Be=class extends l{},xt=class extends l{},wt=class extends l{},gt=class extends l{},yt=class extends l{},bt=class extends l{},kt=class extends l{},Ot=class extends l{};var Lt=class extends l{},Me=class extends l{};function Sn(e){return e instanceof bt?"connect":e instanceof gt?"delete":e instanceof xe?"get":e instanceof xt?"head":e instanceof kt?"options":e instanceof Ot?"patch":e instanceof Be?"post":e instanceof wt?"put":e instanceof yt?"trace":e[0]}function Nn(e){return e instanceof Lt?"http":"https"}function In(e){let t=me(e);return t==="http"?new p(new Lt):t==="https"?new p(new Me):new d(void 0)}var $r=class extends l{constructor(t,r,n,i,s,o,u,a){super(),this.method=t,this.headers=r,this.body=n,this.scheme=i,this.host=s,this.port=o,this.path=u,this.query=a}};function Bn(e){return new Fe(new h(Nn(e.scheme)),new m,new h(e.host),e.port,e.path,e.query,new m)}function zs(e){return C((()=>{let t=e.scheme,r=ie(t,"");return In(r)})(),t=>C((()=>{let r=e.host;return Y(r,void 0)})(),r=>{let n=new $r(new xe,f([]),"",t,r,e.port,e.path,e.query);return new p(n)}))}function Mn(e){let r=zn(e);return C(r,zs)}var R=class extends l{constructor(t,r,n){super(),this.status=t,this.headers=r,this.body=n}};var we=class e{constructor(t){this.promise=t}static wrap(t){return t instanceof Promise?new e(t):t}static unwrap(t){return t instanceof e?t.promise:t}};function vt(e){return Promise.resolve(we.wrap(e))}function Pn(e,t){return e.then(r=>t(we.unwrap(r)))}function jt(e,t){return e.then(r=>we.wrap(t(we.unwrap(r))))}function xr(e,t){return e.catch(r=>t(r))}function Dn(e,t){return jt(e,n=>(t(n),n))}function At(e,t){return Pn(e,n=>{if(n.isOk()){let i=n[0];return t(i)}else{let i=n[0];return vt(new d(i))}})}async function Wn(e){try{return new p(await fetch(e))}catch(t){return new d(new Et(t.toString()))}}function Rn(e){return new R(e.status,A.fromArray([...e.headers]),e)}function Gn(e){let t=Cn(Bn(e)),r=Sn(e.method).toUpperCase(),n={headers:Ns(e.headers),method:r};return r!=="GET"&&r!=="HEAD"&&(n.body=e.body),new globalThis.Request(t,n)}function Ns(e){let t=new globalThis.Headers;for(let[r,n]of e)t.append(r.toLowerCase(),n);return t}async function wr(e){let t;try{t=await e.body.text()}catch{return new d(new qt)}return new p(e.withFields({body:t}))}var Et=class extends l{constructor(t){super(),this[0]=t}},qt=class extends l{};function Hn(e){let r=Gn(e),n=Wn(r);return At(n,i=>vt(new p(Rn(i))))}var gr=class extends l{constructor(t){super(),this[0]=t}},yr=class extends l{constructor(t){super(),this[0]=t}},br=class extends l{constructor(t){super(),this[0]=t}},Tt=class extends l{},kr=class extends l{},Or=class extends l{constructor(t,r){super(),this[0]=t,this[1]=r}},Lr=class extends l{},vr=class extends l{constructor(t){super(),this.run=t}};function Fs(e,t,r){let n=Hn(e),i=At(n,wr),s=jt(i,u=>{if(u.isOk()){let a=u[0];return t.run(new p(a))}else return t.run(new d(new Tt))}),o=xr(s,u=>t.run(new d(new Tt)));Dn(o,r)}function Jn(e,t){return hn(r=>{let n=Mn(e);if(n.isOk()){let i=n[0];return Fs(i,t,r)}else return r(t.run(new d(new gr(e))))})}function Bs(e){if(e instanceof R&&200<=e.status&&e.status<=299){let t=e.status,r=e.body;return new p(r)}else{if(e instanceof R&&e.status===401)return new d(new Lr);if(e instanceof R&&e.status===404)return new d(new kr);if(e instanceof R&&e.status===500){let t=e.body;return new d(new yr(t))}else{let t=e.status,r=e.body;return new d(new Or(t,r))}}}function Yn(e,t){return new vr(r=>{let i=C(r,Bs),s=C(i,o=>{let u=_n(o,e);if(u.isOk()){let a=u[0];return new p(a)}else{let a=u[0];return new d(new br(a))}});return t(s)})}var zt=class extends l{constructor(t){super(),this.base=t}};var Ct=class extends l{constructor(t,r,n,i){super(),this.id=t,this.name=r,this.entity_type=n,this.fields=i}};var Pe=class extends l{constructor(t,r){super(),this.count=t,this.cats=r}},De=class extends l{constructor(t){super(),this.entity=t}},Ue=class extends l{},St=class extends l{},Nt=class extends l{constructor(t){super(),this[0]=t}};function Ps(e){return[new De(new zt(new Ct(1,"User","User",f([])))),te()]}function Ds(){let e=sr("_id",tt),t=Yn(e,n=>new Nt(n)),r=Jn("https://cataas.com/cat?json=true",t);return ur("Fetching cat"),r}function Us(e,t){if(e instanceof De)return[e,te()];{let r=e.count,n=e.cats;if(t instanceof Ue)return[new Pe(r+1,n),Ds()];if(t instanceof St)return[new Pe(r-1,n),te()];if(t instanceof Nt&&t[0].isOk()){let i=t[0][0];return[new Pe(r,_(i,n)),te()]}else return[e,te()]}}function Ws(e){if(e instanceof De){let r=e.entity.base;return ur("Entity: "+r.name),Ie(f([]),f([_t(f([ze("text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800"),ht(new Ue)]),f([he(r.name)]))]))}else{let t=e.count,r=e.cats,n=N(t);return Ie(f([]),f([_t(f([ze("text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800"),ht(new Ue)]),f([he("+")])),Ie(f([ze("py-2.5 px-5 me-2 mb-2 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-full border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-100 dark:focus:ring-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700")]),f([he(n)])),_t(f([ze("focus:outline-none text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900"),ht(new St)]),f([he("-")])),Ie(f([]),I(r,i=>En(f([yn("https://cataas.com/cat/"+i),bn(200),kn(200)]))))]))}}function Xn(){let e=jn(Ps,Us,Ws),t=An(e,"#app",void 0);if(!t.isOk())throw Oe("assignment_no_match","app",17,"main","Assignment pattern did not match",{value:t})}Xn();
